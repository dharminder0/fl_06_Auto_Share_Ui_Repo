<div class="ins-body t2 h-auto fixed-fr-toolbar" (click)="openEnableMediaSetiing('closeTab')" [ngClass]="{'pad-edit-bl':isOpenBranchingLogicSide}">
    <form [formGroup]="coverPageForm" class="inner cover-gutter-block form-div pointer" [ngStyle]="{'background': brandingColors.BackgroundColor}" (click)="openEnableMediaSetiing('element')" (mouseenter)="hoverOnMainDiv = true" (mouseleave)="hoverOnMainDiv = false"
        [ngClass]="{'hover-main-div':hoverOnMainDiv == true}">
        <div class="default-header">
            <i class="fa fa-circle dot-icon" style="color: #FB403E;" aria-hidden="true"></i>
            <i class="fa fa-circle dot-icon" style="color: #FEC414;" aria-hidden="true"></i>
            <i class="fa fa-circle dot-icon" style="color: #04C95A;" aria-hidden="true"></i>
        </div>
        <div class="form-padding">
            <div class="builder-element" *ngFor="let reOrder of coverElementReorder">
                <div *ngIf="isMediaEnable && reOrder.key == elementReorderKey.media" class="editable-builder" ccFocus id='id-cover-image' (mouseenter)="hoverOnMainDiv = false" (mouseleave)="hoverOnMainDiv = true">
                    <div class="builder-action">
                        <a *ngIf='!coverPageForm.controls["QuizCoverImage"].value' (click)='isProcess = true;onUseMedia(coverPageForm.controls)' [tooltip]="popTemplate" id="upload_widget_opener" class="btn grey line add-btn" data-toggle="modal" data-target="#edit-cover-modal">
                            <i class="zmdi zmdi-plus"></i>{{"ADD_MEDIA" | translate }}</a>
                        <a *ngIf='coverPageForm.controls["QuizCoverImage"].value' (click)="isProcess = true;onUseMedia(coverPageForm.controls)" [tooltip]="popTemplate" id="upload_widget_opener" class="btn grey line action-btn" data-toggle="modal" data-target="#edit-cover-modal">
                            <svg class="svg-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.8718 4.19094L11.8095 1.12865C11.6386 0.957769 11.3618 0.957769 11.1909 1.12865L1.12903 11.1905C1.047 11.2726 1.00086 11.3836 1.00086 11.4998L1 14.563C1 14.6788 1.04614 14.7903 1.12817 14.8723C1.2102 14.9543 1.32169 15.0005 1.43748 15.0005L4.50064 14.9996C4.61683 14.9996 4.72792 14.9535 4.80995 14.8714L14.8718 4.80956C15.0427 4.63868 15.0427 4.36185 14.8718 4.19094ZM4.31881 14.1254L1.8741 14.1263L1.87496 11.6816L9.09371 4.46282L11.5376 6.90668C11.5375 6.90668 4.31881 14.1254 4.31881 14.1254ZM12.1562 6.28803L9.71236 3.8442L11.5 2.0566L13.9438 4.50045L12.1562 6.28803Z" fill="#494949" stroke="#494949" stroke-width="0.25"/>
          </svg> {{"EDIT_MEDIA" | translate }}</a>
                        <a *ngIf='coverPageForm.controls["QuizCoverImage"].value' (click)="isProcess = true;removeImagePopup(coverPageForm.controls)" id="upload_widget_opener" class="btn grey line action-btn" data-toggle="modal" data-target="#edit-cover-modal">
                            <svg class="svg-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.9566 4.12926L14.5781 3.20267C14.434 2.84976 14.0311 2.61264 13.5757 2.61264H10.3948V1.7668C10.3948 1.34404 9.97395 1 9.45647 1H6.54353C6.02618 1 5.60521 1.34404 5.60521 1.7668V2.61264H2.42444C1.96895 2.61264 1.56602 2.84976 1.42191 3.20267L1.04344 4.12926C0.957254 4.34021 1.00093 4.57381 1.16009 4.75421C1.31925 4.93462 1.57675 5.04239 1.84902 5.04239H2.24463L3.11534 13.8363C3.18007 14.4888 3.85802 15 4.65903 15H11.5176C12.3185 15 12.9966 14.4888 13.0612 13.8362L13.9319 5.04239H14.151C14.4233 5.04239 14.6808 4.93462 14.8399 4.75432C14.9991 4.57391 15.0427 4.34021 14.9566 4.12926ZM6.60958 1.82031H9.39042V2.61264H6.60958V1.82031ZM12.0601 13.7701C12.0374 13.9998 11.7991 14.1797 11.5176 14.1797H4.65903C4.3776 14.1797 4.13933 13.9998 4.11657 13.7701L3.25226 5.04239H12.9243L12.0601 13.7701ZM2.06441 4.22208L2.37475 3.46222C2.38181 3.4447 2.40182 3.43295 2.42444 3.43295H13.5757C13.5983 3.43295 13.6182 3.4447 13.6254 3.46222L13.9357 4.22208H2.06441Z" fill="#494949" stroke="#494949" stroke-width="0.1"/>
            <path d="M10.3428 13.741C10.3517 13.7414 10.3604 13.7415 10.3693 13.7415C10.6347 13.7415 10.8565 13.5717 10.8703 13.3527L11.3419 5.95904C11.3563 5.73282 11.1434 5.53981 10.8665 5.52806C10.5889 5.51599 10.3534 5.69009 10.3388 5.91632L9.86739 13.31C9.853 13.5363 10.0658 13.7293 10.3428 13.741Z" fill="#494949" stroke="#494949" stroke-width="0.1"/>
            <path d="M5.22796 13.3537C5.24261 13.5724 5.46414 13.7416 5.72897 13.7416C5.73812 13.7416 5.74754 13.7413 5.75682 13.7409C6.03368 13.7286 6.24593 13.5353 6.23089 13.3091L5.73694 5.91537C5.72191 5.68915 5.4852 5.51579 5.20822 5.52818C4.93136 5.54047 4.71911 5.73379 4.73415 5.96002L5.22796 13.3537Z" fill="#494949" stroke="#494949" stroke-width="0.1"/>
            <path d="M8.0056 13.7415C8.28298 13.7415 8.50779 13.5579 8.50779 13.3314V5.93768C8.50779 5.71114 8.28298 5.52753 8.0056 5.52753C7.72822 5.52753 7.50342 5.71114 7.50342 5.93768V13.3314C7.50342 13.5579 7.72822 13.7415 8.0056 13.7415Z" fill="#494949" stroke="#494949" stroke-width="0.1"/>
          </svg> {{"DELETE_MEDIA" | translate }}</a>
                    </div>
                    <figure (click)="openEnableMediaSetiing('media')" class="builder -fig">
                        <img *ngIf="imageORvideo === 'image' && !coverPageForm.controls.QuizCoverImage.value" [ngStyle]="{'border': !coverPageForm.controls.QuizCoverImage.value ? '1px dashed #E0E0E0' : 'none' }" [src]="defaultCoverImage" />

                        <cl-image *ngIf="imageORvideo === 'image' && coverPageForm.controls.QuizCoverImage.value" public-id={{coverPageForm.controls.PublicIdForQuizCover?.value}}>
                            <cl-transformation width="720" height="350" crop="fill" fetch-format="auto" quality="100"></cl-transformation>
                        </cl-image>
                        <div *ngFor="let speed of speedList">
                            <div *ngIf="imageORvideo === 'video' && selectedSpeed==speed.value">
                                <cl-video id='update' public-id={{coverPageForm.controls.PublicIdForQuizCover?.value}} secure="true" class="my-videos" controls="true" [attr.poster]='applyposter()'>
                                    <cl-transformation quality="auto" effect="sharpen" crop="fill" [attr.effect]="'accelerate:'+speed.value"></cl-transformation>
                                </cl-video>
                            </div>
                        </div>
                    </figure>
                    <span class="videoDropdown">
        <ng-select class="forwardspd" *ngIf="imageORvideo === 'video'" placeholder="1" [options]="speedList"
          [(ngModel)]="selectedSpeed" [ngModelOptions]="{standalone: true}" [noFilter]="10">
        </ng-select>
      </span>
                </div>
                <div *ngIf="reOrder.key == elementReorderKey.title" class="builder-element des has-title-variable" 
                     (mouseenter)="hoverOnMainDiv = false;froalaEditorFor['QuizCoverTitle'].isShowVarBtn = true" 
                     (mouseleave)="hoverOnMainDiv = true;froalaEditorFor['QuizCoverTitle'].isShowVarBtn = false">
                    <div ccFocus 
                         id="id-quiz-cover-title" 
                         [froalaEditor]="froalaEditorFor['QuizCoverTitle'].options" 
                         autocomplete="off" 
                         [(froalaModel)]="coverPageDetail.QuizCoverTitle" 
                         after-char="46" 
                         word-count="10" 
                         focus-out=true 
                         popup-position="left" 
                         data-gramm_editor=false 
                         formControlName='QuizCoverTitle' 
                         [ngClass]="{'text-view': isWhatsappEnable}" 
                         class="form-control fr-prop cover-subhead editMode-inner-div mheight-41 pright-20" 
                         [ngStyle]="{'color': brandingColors.FontColor ,'background': brandingColors.BackgroundColor ,'font-family': brandingColors.FontType ? brandingColors.FontType:'' }"
                         style="font-size: 18px;"
                         (froalaModelChange)="updateVarListFor('QuizCoverTitle')">
                    </div>
                    <i *ngIf="config.isQuizVarPopupEnable && reOrder.key == elementReorderKey.title && froalaEditorFor['QuizCoverTitle'].isShowVarBtn && isQuesAndContentInSameTable" 
                        id="title-btn-variable" 
                        class='fa fa-plus mleft-5 f-20 pointer desbtn'
                        title="{{'Lbl_AddVariable' | translate}}"
                        (click)="openVariablePopup('QuizCoverTitle')">
                    </i>
                </div>
                <div *ngIf="isDesEnable && reOrder.key == elementReorderKey.description" 
                     class="builder-element mbottom-20 des has-des-variable" 
                     (mouseenter)="hoverOnMainDiv = false;froalaEditorFor['QuizDescription'].isShowVarBtn = true" 
                     (mouseleave)="hoverOnMainDiv = true;froalaEditorFor['QuizDescription'].isShowVarBtn = false">
                     <div ccFocus 
                          id="id-quiz-desc" 
                          [froalaEditor]="froalaEditorFor['QuizDescription'].options" 
                          autocomplete="off" 
                          [(froalaModel)]="coverPageDetail.QuizDescription" 
                          after-char="46" 
                          word-count="10" 
                          focus-out=true 
                          popup-position="left" 
                          data-gramm_editor=false 
                          [ngStyle]="{'color': brandingColors.FontColor ,'background': brandingColors.BackgroundColor ,'font-family': brandingColors.FontType ? brandingColors.FontType:'' }"
                          formControlName='QuizDescription' 
                          class="form-control fr-prop resize editMode-inner-div mheight-41 pright-20"
                          (froalaModelChange)="updateVarListFor('QuizDescription')">
                     </div>
                     <i *ngIf="config.isQuizVarPopupEnable && isDesEnable && reOrder.key == elementReorderKey.description && froalaEditorFor['QuizDescription'].isShowVarBtn && isQuesAndContentInSameTable" 
                        id="des-btn-variable" 
                        class='fa fa-plus mleft-5 f-20 pointer desbtn'
                        title="{{'Lbl_AddVariable' | translate}}"
                        (click)="openVariablePopup('QuizDescription')">
                     </i>
                    <!-- <h3>
                    </h3> -->
                </div>
                <input *ngIf="isButtonEnable && reOrder.key == elementReorderKey.button && !isWhatsappEnable" 
                        ccFocus 
                        id="id-quiz-start-button" 
                        [placeholder]="this.brandingColors.QuizStartBtnPlaceholderText ? this.brandingColors.QuizStartBtnPlaceholderText : ('START' | translate)"
                        autocomplete="off" 
                        maxlength="40" 
                        (mouseover)="reOrder.isHovered = true" (mouseout)="reOrder.isHovered = false" [ngStyle]="{'background': reOrder.isHovered ? brandingColors.ButtonHoverColor : brandingColors.ButtonColor,'color' : reOrder.isHovered ? brandingColors.ButtonHoverTextColor : brandingColors.ButtonFontColor,'border-color':  brandingColors.ButtonColor,'font-family': brandingColors.FontType ? brandingColors.FontType:''}" 
                        formControlName='QuizStartButtonText' 
                        class="form-control fr-prop new-blue text-btn" 
                        (mouseenter)="hoverOnMainDiv = false" 
                        (mouseleave)="hoverOnMainDiv = true" />
            </div>
        </div>
    </form>
</div>

<div *ngIf="isVisibleMediaLibrary">
    <app-media-library [automationId]=[quizId] (changeValue)='changeUploadedUrl($event)'></app-media-library>
</div>

<div #ref style="display: none;"></div>

<ng-template #popTemplate>
    {{"Lbl_AcceptedFormats" | translate}}:
    <div>
        <span>JPEG, PNG, TIFF, GIF</span>
    </div>
    {{"Lbl_Dimensions" | translate}}:
    <div>
        <span>900px {{"Lbl_By" | translate}} 400px</span>
    </div>
</ng-template>

<app-message-variable-popup (updateIsOpenPopup)="UpdatePopUpStatus($event)"></app-message-variable-popup>